<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIMI翻译器 - 专业多语言翻译平台</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4F46E5',
                        secondary: '#8B5CF6',
                        inputText: '#666666',
                        outputText: '#2a9d8f',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                },
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .bg-gradient-custom {
                background: linear-gradient(135deg, #4F46E5, #8B5CF6);
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .transition-all-300 {
                transition: all 0.3s ease;
            }
            .translate-smooth {
                transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
        }
    </style>
</head>
<body class="bg-gradient-custom min-h-screen flex flex-col">
    <!-- 顶部导航栏 -->
    <header class="sticky top-0 z-50 bg-white bg-opacity-95 backdrop-blur-sm shadow-sm">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fa fa-language text-primary text-2xl"></i>
                <h1 class="text-2xl font-bold text-primary">MIMI翻译器</h1>
            </div>
            <nav class="hidden md:flex space-x-8">
                <a href="#" class="text-gray-700 hover:text-primary transition-all-300 font-medium">翻译</a>
                <a href="#" class="text-gray-700 hover:text-primary transition-all-300">文档翻译</a>
                <a href="#" class="text-gray-700 hover:text-primary transition-all-300">图片翻译</a>
                <a href="#" class="text-gray-700 hover:text-primary transition-all-300">语音翻译</a>
            </nav>
            <div class="flex items-center space-x-4">
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-100 transition-all-300">
                    <i class="fa fa-moon-o text-gray-600"></i>
                </button>
                <button class="hidden md:block bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg transition-all-300">
                    登录
                </button>
                <button class="md:hidden p-2 rounded-full hover:bg-gray-100 transition-all-300">
                    <i class="fa fa-bars text-gray-600"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- 主要翻译区域 -->
    <main class="flex-grow container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <!-- 翻译选项 -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                <div class="flex justify-between items-center mb-4">
                    <div class="flex space-x-4">
                        <select id="source-language" class="border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all-300">
                            <option value="auto">自动检测</option>
                            <option value="zh">中文</option>
                            <option value="en">英语</option>
                            <option value="ja">日语</option>
                            <option value="ko">韩语</option>
                            <option value="fr">法语</option>
                            <option value="de">德语</option>
                            <option value="es">西班牙语</option>
                            <option value="ru">俄语</option>
                        </select>
                        <button id="swap-languages" class="p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 transition-all-300">
                            <i class="fa fa-exchange"></i>
                        </button>
                        <select id="target-language" class="border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all-300">
                            <option value="zh">中文</option>
                            <option value="en">英语</option>
                            <option value="ja">日语</option>
                            <option value="ko">韩语</option>
                            <option value="fr">法语</option>
                            <option value="de">德语</option>
                            <option value="es">西班牙语</option>
                            <option value="ru">俄语</option>
                        </select>
                    </div>
                    <div class="flex space-x-2">
                        <button class="p-2 rounded-full hover:bg-gray-100 text-gray-600 transition-all-300" title="文本转语音">
                            <i class="fa fa-volume-up"></i>
                        </button>
                        <button class="p-2 rounded-full hover:bg-gray-100 text-gray-600 transition-all-300" title="复制">
                            <i class="fa fa-copy"></i>
                        </button>
                        <button id="clear-source" class="p-2 rounded-full hover:bg-gray-100 text-gray-600 transition-all-300" title="清空">
                            <i class="fa fa-trash"></i>
                        </button>
                    </div>
                </div>
                
                <!-- 输入区域 -->
                <div class="mb-6">
                    <textarea 
                        id="source-text" 
                        class="w-full h-32 p-4 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all-300 resize-none"
                        placeholder="请输入要翻译的文本..."
                        style="color: #666666;"
                    ></textarea>
                    <div class="text-right text-sm text-gray-500 mt-1">
                        <span id="char-count">0</span> 字符
                    </div>
                </div>
                
                <!-- 翻译按钮 -->
                <div class="text-center">
                    <button 
                        id="translate-btn" 
                        class="bg-primary hover:bg-primary/90 text-white px-8 py-3 rounded-lg shadow-md hover:shadow-lg transition-all-300 flex items-center justify-center mx-auto w-full max-w-xs"
                    >
                        <i class="fa fa-language mr-2"></i>
                        <span>立即翻译</span>
                    </button>
                </div>
            </div>
            
            <!-- 结果区域 -->
            <div class="bg-white rounded-lg shadow-lg p-6 relative">
                <div class="flex justify-between items-center mb-4">
                    <div class="text-gray-500">
                        <span id="detected-language">检测语言</span>
                        <span> → </span>
                        <span id="result-language">目标语言</span>
                    </div>
                    <div class="flex space-x-2">
                        <button class="p-2 rounded-full hover:bg-gray-100 text-gray-600 transition-all-300" title="文本转语音">
                            <i class="fa fa-volume-up"></i>
                        </button>
                        <button id="copy-result" class="p-2 rounded-full hover:bg-gray-100 text-gray-600 transition-all-300" title="复制">
                            <i class="fa fa-copy"></i>
                        </button>
                    </div>
                </div>
                
                <!-- 输出区域 -->
                <div id="result-container" class="min-h-[128px] p-4 border border-gray-200 rounded-lg bg-gray-50 transition-all-300">
                    <div id="translation-result" class="whitespace-pre-wrap break-words" style="color: #2a9d8f;">
                        翻译结果将显示在这里
                    </div>
                    <div id="loading-indicator" class="hidden flex items-center justify-center h-32">
                        <div class="animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-primary"></div>
                    </div>
                </div>
                
                <!-- 更多功能 -->
                <div class="mt-6 grid grid-cols-2 md:grid-cols-4 gap-3">
                    <button class="flex flex-col items-center justify-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-all-300">
                        <i class="fa fa-picture-o text-primary text-xl mb-1"></i>
                        <span class="text-sm">图片翻译</span>
                    </button>
                    <button class="flex flex-col items-center justify-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-all-300">
                        <i class="fa fa-file-text-o text-primary text-xl mb-1"></i>
                        <span class="text-sm">文档翻译</span>
                    </button>
                    <button class="flex flex-col items-center justify-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-all-300">
                        <i class="fa fa-comment-o text-primary text-xl mb-1"></i>
                        <span class="text-sm">对话翻译</span>
                    </button>
                    <button class="flex flex-col items-center justify-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-all-300">
                        <i class="fa fa-history text-primary text-xl mb-1"></i>
                        <span class="text-sm">翻译历史</span>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- 底部信息 -->
    <footer class="bg-white bg-opacity-95 backdrop-blur-sm mt-12 py-8 border-t border-gray-100">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-lg font-semibold mb-4 text-primary">MIMI翻译器</h3>
                    <p class="text-gray-600 text-sm">提供专业、准确、快速的多语言翻译服务，支持文本、文档、图片和语音翻译。</p>
                </div>
                <div>
                    <h4 class="font-medium mb-4 text-gray-800">翻译服务</h4>
                    <ul class="space-y-2 text-sm text-gray-600">
                        <li><a href="#" class="hover:text-primary transition-all-300">文本翻译</a></li>
                        <li><a href="#" class="hover:text-primary transition-all-300">文档翻译</a></li>
                        <li><a href="#" class="hover:text-primary transition-all-300">图片翻译</a></li>
                        <li><a href="#" class="hover:text-primary transition-all-300">语音翻译</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-medium mb-4 text-gray-800">关于我们</h4>
                    <ul class="space-y-2 text-sm text-gray-600">
                        <li><a href="#" class="hover:text-primary transition-all-300">公司介绍</a></li>
                        <li><a href="#" class="hover:text-primary transition-all-300">联系我们</a></li>
                        <li><a href="#" class="hover:text-primary transition-all-300">隐私政策</a></li>
                        <li><a href="#" class="hover:text-primary transition-all-300">使用条款</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-medium mb-4 text-gray-800">关注我们</h4>
                    <div class="flex space-x-4 mb-4">
                        <a href="#" class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary hover:bg-primary/20 transition-all-300">
                            <i class="fa fa-weixin"></i>
                        </a>
                        <a href="#" class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary hover:bg-primary/20 transition-all-300">
                            <i class="fa fa-weibo"></i>
                        </a>
                        <a href="#" class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary hover:bg-primary/20 transition-all-300">
                            <i class="fa fa-github"></i>
                        </a>
                    </div>
                    <p class="text-sm text-gray-500">© 2023 MIMI翻译器. 保留所有权利.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- 通知提示 -->
    <div id="notification" class="fixed bottom-4 right-4 bg-green-500 text-white px-4 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 flex items-center">
        <i class="fa fa-check-circle mr-2"></i>
        <span id="notification-message">操作成功</span>
    </div>

    <script>
        // DOM 元素引用
        const sourceText = document.getElementById('source-text');
        const translationResult = document.getElementById('translation-result');
        const translateBtn = document.getElementById('translate-btn');
        const sourceLanguage = document.getElementById('source-language');
        const targetLanguage = document.getElementById('target-language');
        const swapLanguagesBtn = document.getElementById('swap-languages');
        const clearSourceBtn = document.getElementById('clear-source');
        const copyResultBtn = document.getElementById('copy-result');
        const charCount = document.getElementById('char-count');
        const loadingIndicator = document.getElementById('loading-indicator');
        const notification = document.getElementById('notification');
        const notificationMessage = document.getElementById('notification-message');
        const detectedLanguageEl = document.getElementById('detected-language');
        const resultLanguageEl = document.getElementById('result-language');
        
        // 字符计数功能
        sourceText.addEventListener('input', function() {
            charCount.textContent = this.value.length;
        });
        
        // 交换语言功能
        swapLanguagesBtn.addEventListener('click', function() {
            if (sourceLanguage.value !== 'auto') {
                const temp = sourceLanguage.value;
                sourceLanguage.value = targetLanguage.value;
                targetLanguage.value = temp;
            }
            updateLanguageDisplay();
        });
        
        // 清空输入功能
        clearSourceBtn.addEventListener('click', function() {
            sourceText.value = '';
            charCount.textContent = '0';
            translationResult.textContent = '翻译结果将显示在这里';
        });
        
        // 复制结果功能
        copyResultBtn.addEventListener('click', function() {
            const textToCopy = translationResult.textContent;
            if (textToCopy && textToCopy !== '翻译结果将显示在这里') {
                navigator.clipboard.writeText(textToCopy).then(() => {
                    showNotification('已复制到剪贴板');
                }).catch(err => {
                    showNotification('复制失败，请手动复制', 'error');
                });
            }
        });
        
        // 翻译按钮点击事件
        translateBtn.addEventListener('click', function() {
            const text = sourceText.value.trim();
            if (!text) {
                showNotification('请输入要翻译的文本', 'error');
                return;
            }
            
            // 显示加载状态
            showLoading(true);
            
            // 调用翻译API
            translateText(text, sourceLanguage.value, targetLanguage.value)
                .then(result => {
                    translationResult.textContent = result.translatedText;
                    if (result.detectedLanguage) {
                        detectedLanguageEl.textContent = getLanguageName(result.detectedLanguage);
                    }
                    updateLanguageDisplay();
                    showNotification('翻译完成');
                })
                .catch(error => {
                    console.error('翻译失败:', error);
                    translationResult.textContent = '翻译失败，请稍后重试或检查网络连接';
                    showNotification('翻译失败', 'error');
                })
                .finally(() => {
                    showLoading(false);
                });
        });
        
        // 自动翻译功能（输入内容变化时延迟翻译）
        let translateTimeout;
        sourceText.addEventListener('input', function() {
            clearTimeout(translateTimeout);
            translateTimeout = setTimeout(() => {
                const text = this.value.trim();
                if (text.length > 5) { // 输入超过5个字符才自动翻译
                    translateBtn.click();
                }
            }, 800); // 800毫秒延迟
        });
        
        // 显示/隐藏加载状态
        function showLoading(show) {
            if (show) {
                translationResult.classList.add('opacity-50');
                loadingIndicator.classList.remove('hidden');
            } else {
                translationResult.classList.remove('opacity-50');
                loadingIndicator.classList.add('hidden');
            }
        }
        
        // 显示通知
        function showNotification(message, type = 'success') {
            notificationMessage.textContent = message;
            
            // 根据类型设置不同颜色
            if (type === 'error') {
                notification.classList.remove('bg-green-500');
                notification.classList.add('bg-red-500');
            } else {
                notification.classList.remove('bg-red-500');
                notification.classList.add('bg-green-500');
            }
            
            // 显示通知
            notification.classList.remove('translate-y-20', 'opacity-0');
            notification.classList.add('translate-y-0', 'opacity-100');
            
            // 3秒后隐藏
            setTimeout(() => {
                notification.classList.remove('translate-y-0', 'opacity-100');
                notification.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }
        
        // 更新语言显示
        function updateLanguageDisplay() {
            if (sourceLanguage.value === 'auto') {
                detectedLanguageEl.textContent = '检测语言';
            } else {
                detectedLanguageEl.textContent = getLanguageName(sourceLanguage.value);
            }
            resultLanguageEl.textContent = getLanguageName(targetLanguage.value);
        }
        
        // 获取语言名称
        function getLanguageName(code) {
            const languages = {
                'auto': '自动检测',
                'zh': '中文',
                'en': '英语',
                'ja': '日语',
                'ko': '韩语',
                'fr': '法语',
                'de': '德语',
                'es': '西班牙语',
                'ru': '俄语'
            };
            return languages[code] || code;
        }
        
        // 翻译API调用函数
        async function translateText(text, fromLang, toLang) {
            try {
                // 这里使用 MyMemory API 作为示例，实际应用中可以替换为百度翻译API或其他商业API
                // 注意：真实项目中应使用服务器端代理来调用API，避免暴露API密钥
                const url = `https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=${fromLang}|${toLang}`;
                
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`API错误: ${response.status}`);
                }
                
                const data = await response.json();
                
                // 构建返回结果
                return {
                    translatedText: data.responseData.translatedText,
                    detectedLanguage: data.responseDetails && data.responseDetails.detectedSourceLanguage
                };
            } catch (error) {
                // 如果API调用失败，使用备用翻译逻辑
                console.warn('API调用失败，使用备用翻译逻辑:', error);
                return {
                    translatedText: getFallbackTranslation(text, toLang),
                    detectedLanguage: fromLang === 'auto' ? detectLanguage(text) : fromLang
                };
            }
        }
        
        // 备用翻译逻辑（当API不可用时）
        function getFallbackTranslation(text, targetLang) {
            // 简单的翻译映射表，仅用于演示
            const translations = {
                '你好': {'en': 'Hello', 'ja': 'こんにちは', 'ko': '안녕하세요'},
                'Hello': {'zh': '你好', 'ja': 'こんにちは', 'ko': '안녕하세요'},
                '谢谢': {'en': 'Thank you', 'ja': 'ありがとう', 'ko': '감사합니다'},
                'Thank you': {'zh': '谢谢', 'ja': 'ありがとう', 'ko': '감사합니다'},
                '再见': {'en': 'Goodbye', 'ja': 'さようなら', 'ko': '안녕히 가세요'},
                'Goodbye': {'zh': '再见', 'ja': 'さようなら', 'ko': '안녕히 가세요'}
            };
            
            // 检查是否有预定义翻译
            if (translations[text] && translations[text][targetLang]) {
                return translations[text][targetLang];
            }
            
            // 简单的模拟翻译
            if (targetLang === 'en') {
                return `[Translated to English] ${text}`;
            } else if (targetLang === 'ja') {
                return `[日本語に翻訳] ${text}`;
            } else if (targetLang === 'ko') {
                return `[한국어로 번역] ${text}`;
            } else {
                return `[翻译到${getLanguageName(targetLang)}] ${text}`;
            }
        }
        
        // 简单的语言检测
        function detectLanguage(text) {
            // 检查是否包含中文字符
            if (/[\u4e00-\u9fa5]/.test(text)) {
                return 'zh';
            }
            // 检查是否包含日文字符
            if (/[\u3040-\u30ff]/.test(text)) {
                return 'ja';
            }
            // 检查是否包含韩文字符
            if (/[\uac00-\ud7af]/.test(text)) {
                return 'ko';
            }
            // 默认返回英文
            return 'en';
        }
        
        // 初始化
        function init() {
            updateLanguageDisplay();
            
            // 为移动设备添加触摸反馈
            document.querySelectorAll('button').forEach(btn => {
                btn.addEventListener('touchstart', function() {
                    this.classList.add('scale-95');
                });
                btn.addEventListener('touchend', function() {
                    this.classList.remove('scale-95');
                });
            });
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
